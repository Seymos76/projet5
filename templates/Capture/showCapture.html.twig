{# templates/Capture/showCapture.html.twig #}

{% extends "layout.html.twig" %}

{% block title %}Observation numéro {{ id }} {% endblock %}
{% block stylesheets %}
	{{ parent() }}
	<style type="text/css">
			.capturemap{ /* la carte DOIT avoir une hauteur sinon elle n'apparaît pas */
				height:400px;
			}
		</style>
{% endblock %}
{% block body %}
	<div id="map0" class="capturemap" data-identifiant={{ id }}>
	</div>
	<h1><a href="{{ path('oiseau', {id: capture.bird.id}) }}">{% if capture.bird.vernacularname == false %}{{ capture.bird.validname }} {% else %} {{ capture.bird.vernacularname }} - {{ capture.bird.validname }}{% endif %}</a></h1>
    {% if capture.image is not null %}
		<img src="{{ asset('uploads/bird/' ~ capture.image.filename) }}" alt="" height="150">
    {% endif %}
	<p>{% if capture.status == 'validated' %}Validé {% endif %}</p>
	<p>{{ capture.createdDate|date('d/m/Y') }}</p>
	<p>{{ capture.address }}, {{ capture.zipcode }}, {{ capture.city }}</p>
	<p>Informations :</p>
	<p>{{ capture.content }}</p>
	<p>Publié par : {% if capture.user.avatar == null %} {{ capture.user.username }} {% else %} {{ capture.user.avatar }} {% endif %}</p>
	{% if 'particular' in capture.user.roles %} <p>Validé par : {% if capture.validatedBy.avatar == null %} {{ capture.validatedBy.username }} {% else %} {{ capture.validatedBy.avatar }} {% endif %}</p> {% endif %}

	<p>{% if numberOfCaptureComments == 1 %} Commentaire : {% elseif numberOfCaptureComments > 1 %} Commentaires : {% else %} Soyez le premier à commenter ! {% endif %}</p>
	{% for comment in capture.comments %}
			<div>
				<p>{{comment.author.avatar}}</p>
				<p>{{comment.author.firstname}} {{comment.author.lastname}}</p>
				<p>{{comment.content}}</p>
			</div>
		{% endfor %}

	{{ form(form) }}
{% endblock %}
{% block javascripts %}
	{{ parent() }}
	<script type="text/javascript" src="{{ asset('javascript/showcapturemap.js') }}"></script>
{% endblock %}
   
